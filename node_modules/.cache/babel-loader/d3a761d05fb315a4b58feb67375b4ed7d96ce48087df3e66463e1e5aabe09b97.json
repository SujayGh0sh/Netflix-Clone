{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sujayghosh/Documents/netflix/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sujayghosh/Documents/netflix/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sujayghosh/Documents/netflix/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{selectUser}from\"../features/userSlice\";import db,{auth}from\"../firebase\";import Nav from\"../Nav\";import PlanScreen from\"./PlanScreen\";import\"./ProfileScreen.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfileScreen(){var user=useSelector(selectUser);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),subscription=_useState2[0],setSubscription=_useState2[1];useEffect(function(){db.collection(\"customers\").doc(user.uid).collection(\"subscriptions\").get().then(function(querySnapshort){querySnapshort.forEach(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(subscription){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setSubscription({role:subscription.data().role,current_period_end:subscription.data().current_period_end.seconds,current_period_start:subscription.data().current_period_start.seconds});case 1:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());});},[user.uid]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen_body\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen_info\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png\",alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen_details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileScreen_plans\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Plans\"}),subscription&&/*#__PURE__*/_jsx(\"h4\",{children:\"(Current plan: \"+subscription.role+\")\"}),/*#__PURE__*/_jsx(PlanScreen,{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return auth.signOut();},className:\"profileScreen_signOut\",children:\"Sign Out\"})]})]})]})]})]});}export default ProfileScreen;","map":{"version":3,"names":["React","useEffect","useState","useSelector","selectUser","db","auth","Nav","PlanScreen","ProfileScreen","user","subscription","setSubscription","collection","doc","uid","get","then","querySnapshort","forEach","role","data","current_period_end","seconds","current_period_start","email","signOut"],"sources":["/Users/sujayghosh/Documents/netflix/src/Screens/ProfileScreen.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"../features/userSlice\";\nimport db, { auth } from \"../firebase\";\nimport Nav from \"../Nav\";\nimport PlanScreen from \"./PlanScreen\";\nimport \"./ProfileScreen.css\";\n\nfunction ProfileScreen() {\n  const user = useSelector(selectUser);\n\n\n  const [subscription, setSubscription] = useState(null);\n\n  useEffect(() => {\n    db.collection(\"customers\")\n      .doc(user.uid)\n      .collection(\"subscriptions\")\n      .get()\n      .then((querySnapshort) => {\n        querySnapshort.forEach(async (subscription) => {\n          setSubscription({\n            role: subscription.data().role,\n            current_period_end: subscription.data().current_period_end.seconds,\n            current_period_start:\n              subscription.data().current_period_start.seconds,\n          });\n        });\n      });\n  }, [user.uid]);\n\n\n  return (\n    <div className=\"profileScreen\">\n      <Nav />\n      <div className=\"profileScreen_body\">\n        <h1>Edit Profile</h1>\n        <div className=\"profileScreen_info\">\n          <img\n            src=\"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png\"\n            alt=\"\"\n          />\n          <div className=\"profileScreen_details\">\n            <h2>{user.email}</h2>\n            <div className=\"profileScreen_plans\">\n                <h3>Plans</h3>\n              {subscription && (\n                <h4>\n                    {\"(Current plan: \" + subscription.role + \")\"}\n                </h4>\n              )}\n              {/* <h3>Plans</h3> */}\n              <PlanScreen />\n              <button\n                onClick={() => auth.signOut()}\n                className=\"profileScreen_signOut\"\n              >\n                Sign Out\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ProfileScreen;\n"],"mappings":"2XAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,aAAa,CACzC,OAASC,UAAU,KAAQ,uBAAuB,CAClD,MAAOC,GAAE,EAAIC,IAAI,KAAQ,aAAa,CACtC,MAAOC,IAAG,KAAM,QAAQ,CACxB,MAAOC,WAAU,KAAM,cAAc,CACrC,MAAO,qBAAqB,CAAC,wFAE7B,QAASC,cAAa,EAAG,CACvB,GAAMC,KAAI,CAAGP,WAAW,CAACC,UAAU,CAAC,CAGpC,cAAwCF,QAAQ,CAAC,IAAI,CAAC,wCAA/CS,YAAY,eAAEC,eAAe,eAEpCX,SAAS,CAAC,UAAM,CACdI,EAAE,CAACQ,UAAU,CAAC,WAAW,CAAC,CACvBC,GAAG,CAACJ,IAAI,CAACK,GAAG,CAAC,CACbF,UAAU,CAAC,eAAe,CAAC,CAC3BG,GAAG,EAAE,CACLC,IAAI,CAAC,SAACC,cAAc,CAAK,CACxBA,cAAc,CAACC,OAAO,4FAAC,iBAAOR,YAAY,mHACxCC,eAAe,CAAC,CACdQ,IAAI,CAAET,YAAY,CAACU,IAAI,EAAE,CAACD,IAAI,CAC9BE,kBAAkB,CAAEX,YAAY,CAACU,IAAI,EAAE,CAACC,kBAAkB,CAACC,OAAO,CAClEC,oBAAoB,CAClBb,YAAY,CAACU,IAAI,EAAE,CAACG,oBAAoB,CAACD,OAC7C,CAAC,CAAC,CAAC,qDACJ,+DAAC,CACJ,CAAC,CAAC,CACN,CAAC,CAAE,CAACb,IAAI,CAACK,GAAG,CAAC,CAAC,CAGd,mBACE,aAAK,SAAS,CAAC,eAAe,wBAC5B,KAAC,GAAG,IAAG,cACP,aAAK,SAAS,CAAC,oBAAoB,wBACjC,oBAAI,cAAY,EAAK,cACrB,aAAK,SAAS,CAAC,oBAAoB,wBACjC,YACE,GAAG,CAAC,wEAAwE,CAC5E,GAAG,CAAC,EAAE,EACN,cACF,aAAK,SAAS,CAAC,uBAAuB,wBACpC,oBAAKL,IAAI,CAACe,KAAK,EAAM,cACrB,aAAK,SAAS,CAAC,qBAAqB,wBAChC,oBAAI,OAAK,EAAK,CACfd,YAAY,eACX,oBACK,iBAAiB,CAAGA,YAAY,CAACS,IAAI,CAAG,GAAG,EAEjD,cAED,KAAC,UAAU,IAAG,cACd,eACE,OAAO,CAAE,yBAAMd,KAAI,CAACoB,OAAO,EAAE,EAAC,CAC9B,SAAS,CAAC,uBAAuB,UAClC,UAED,EAAS,GACL,GACF,GACF,GACF,GACF,CAEV,CAEA,cAAejB,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}